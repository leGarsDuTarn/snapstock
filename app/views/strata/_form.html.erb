<%# Astuce : Si 'brand' est nil (mode edit), Rails gère intelligemment [nil, stratum] comme juste 'stratum' %>
<%= simple_form_for([brand, stratum]) do |f| %>

  <%# Pas besoin de bloc d'erreur manuel, Simple Form colore les champs en rouge tout seul %>

  <div class="form-inputs">
    <%# CHAMP NOM %>
    <%= f.input :name,
                label: "Nom du niveau (Code)",
                placeholder: "Ex: H1, H2, Proxi...",
                input_html: { class: "form-control-lg", autofocus: true },
                label_html: { class: "fw-bold text-secondary small" },
                hint: "Le code utilisé en interne par l'enseigne." %>

    <%# CHAMP RANG %>
    <%= f.input :rank,
                label: "Niveau d'assortiment (Rang)",
                placeholder: "Ex: 1",
                input_html: { class: "form-control-lg" },
                label_html: { class: "fw-bold text-secondary small" },
                hint: "Logique entonnoir : 1 = Assortiment le plus large (100%)." %>
  </div>

  <div class="d-grid gap-2 d-md-flex justify-content-md-end mt-5 border-top pt-4">
    <%# Pour le bouton Annuler, on doit retrouver l'enseigne parente %>
    <% parent_brand = brand || stratum.brand %>

    <%= link_to "Annuler", brand_path(parent_brand), class: "btn btn-light px-4 border" %>

    <%= f.button :submit, "Enregistrer", class: "btn btn-primary fw-bold px-4" %>
  </div>
<% end %>
